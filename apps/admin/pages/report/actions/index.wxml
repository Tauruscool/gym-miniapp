<view class="page">

  <view class="card">

    <view class="card-title">选择训练动作</view>

    <view class="layout">

      <!-- 左侧分类 -->

      <scroll-view class="left-pane" scroll-y="true">

        <view

          wx:for="{{groups}}"

          wx:key="name"

          wx:for-item="g"

          class="group-item {{g.name === activeGroup ? 'group-item--active' : ''}}"

          bindtap="onPickGroup"

          data-name="{{g.name}}"

        >

          {{g.label}}

        </view>

      </scroll-view>

      <!-- 右侧动作列表 -->

      <scroll-view class="right-pane" scroll-y="true">

        <view class="search-row">

          <input

            class="search-input"

            placeholder="按名称搜索动作"

            value="{{keyword}}"

            bindinput="onKeywordInput"

          />

          <button class="search-btn" bindtap="onSearch">搜索</button>

        </view>

        <view class="create-row">

          <button class="create-btn" bindtap="goCreateAction">+ 新建动作</button>

        </view>

        <view wx:if="{{loading}}" class="hint">正在加载动作...</view>

        <block wx:else>

          <view

            wx:for="{{visibleActions}}"

            wx:key="code"

            wx:for-item="act"

            class="action-row"

            bindtap="toggleAction"

            data-code="{{act.code}}"

          >

            <view class="action-main">

              <view class="action-name">{{act.name}}</view>

              <view class="action-group">{{act.muscleGroup}}</view>

            </view>

            <view class="action-check {{act._selected ? 'action-check--on' : ''}}"></view>

          </view>

          <view wx:if="{{!visibleActions.length}}" class="hint">

            当前分类暂无动作

          </view>

        </block>

      </scroll-view>

    </view>

    <!-- 卡片内的底部按钮 -->

    <view class="footer">

      <button class="btn-primary" bindtap="onConfirm">

        确定（已选 {{selectedCount}} 个）

      </button>

    </view>

  </view>

</view>

